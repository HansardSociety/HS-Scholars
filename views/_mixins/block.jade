mixin block( $fields )
  section.Block( class= $fields.heroLandscape && $fields.heroPortrait ?
                        "Block--hero" :
                        null,
                 id= $fields.slug )

    if $fields.heroLandscape && $fields.heroPortrait

      +heroImg( "Block-heroImg", $fields )

    //-- Header --
    header.Block-header

      .Block-headerContent( class= $fields.heroLandscape && $fields.heroPortrait ?
                                   "Block-headerContent--light" : null )

        h2= $fields.title
        
        //-- Header text --
        .Block-headerContentSummary
          p= $fields.introText

          .Block-headerContentSummaryCTAs

            //--
              - Block expand toggle:
              - Reveals .Block-expand below.
              - Removes .is-hidden.
              --
            .Block-headerContentSummaryCTAsToggle
              +button( "secondary",
                       "md",
                       "showMore",
                       "Show more" )
        
        //--
          - Header aside:
          - Yield block for assets/ content specified
          - in Contentful - eg. quote, icon etc.
          --
        if $fields.introAside

          aside.Block-headerContentAside
            
            //-- Small quote --            
            if $fields.introAside.sys.contentType.sys.id === "alumni"
              +smQuote( $fields.introAside.fields )
            
            //-- Programme dates --
            if $fields.introAside.sys.contentType.sys.id === "dates"
  
              h3
                span.InlineIcon.InlineIcon--calendar
                span= $fields.introAsideTitle

              +dates( $fields.introAside.fields )

              +button( "primary",
                       "md",
                       "apply",
                       "Apply now" )

    //--
      - Expandable content:
      - Opened by button in header text above.
      --
    .Block-expand

      //-- Content --
      section.Block-expandContent
        
        each $panel in $fields.panels

          +panel2( $panel )

          //- //-- Content panel --
          //- if $panel.sys.contentType.sys.id === "panelContent"
          //-   +panel( null,
          //-           "flow",
          //-           "moderate",
          //-           $panel.fields, //-- Need to pass fields to mixin in case of any nested mixins --
          //-           "content",
          //-           null )

          //-     //-- Rows --
          //-     +row( $panel.fields )

          //- //-- Testimonials --
          //- if $panel.sys.contentType.sys.id === "panelTestimonials"
          //-   +panel( "canvas",
          //-           null,
          //-           "wide",
          //-           $panel.fields,
          //-           "carousel",
          //-           $panel.fields.alumni )

          //-     block carouselItems
          //-       +testimonial( $item.fields )

          //-- Profile panel --
          //- if $panel.sys.contentType.sys.id === "panelProfiles"
          //-   +panel( null,
          //-           "flow",
          //-           "moderate",
          //-           $panel,
          //-           "content",
          //-           null )
              
          //-     //-- Introductory text for subsequent profiles --
          //-     +row( $panel.fields )
              
          //-     //-- Profiles --
          //-     each $profile in $panel.fields.profiles
          //-       +profile( $profile.fields )

      //-- Footer --
      footer.Block-expandFooter
        .Block-expandFooterContent

          +share( "Share", $fields.shareText, $fields.slug )